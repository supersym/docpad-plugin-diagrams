<h1>coffee-script</h1>
<pre><code class="lang-js"><span class="comment">// Generated by CoffeeScript 1.4.0</span>
(<span class="keyword">function</span>() {
  <span class="keyword">var</span> Lexer, RESERVED, compile, fs, lexer, parser, path, stripBOM, vm, _ref,
    __hasProp = {}.hasOwnProperty;

  fs = require(<span class="string">'fs'</span>);

  path = require(<span class="string">'path'</span>);

  _ref = require(<span class="string">'./lexer'</span>), Lexer = _ref.Lexer, RESERVED = _ref.RESERVED;

  parser = require(<span class="string">'./parser'</span>).parser;

  vm = require(<span class="string">'vm'</span>);

  stripBOM = <span class="keyword">function</span>(content) {
    <span class="keyword">if</span> (content.charCodeAt(<span class="number">0</span>) === <span class="number">0xFEFF</span>) {
      <span class="keyword">return</span> content.substring(<span class="number">1</span>);
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> content;
    }
  };

  <span class="keyword">if</span> (require.extensions) {
    require.extensions[<span class="string">'.coffee'</span>] = <span class="keyword">function</span>(module, filename) {
      <span class="keyword">var</span> content;
      content = compile(stripBOM(fs.readFileSync(filename, <span class="string">'utf8'</span>)), {
        filename: filename
      });
      <span class="keyword">return</span> module._compile(content, filename);
    };
  }

  exports.VERSION = <span class="string">'1.4.0'</span>;

  exports.RESERVED = RESERVED;

  exports.helpers = require(<span class="string">'./helpers'</span>);

  exports.compile = compile = <span class="keyword">function</span>(code, options) {
    <span class="keyword">var</span> header, js, merge;
    <span class="keyword">if</span> (options == <span class="literal">null</span>) {
      options = {};
    }
    merge = exports.helpers.merge;
    <span class="keyword">try</span> {
      js = (parser.parse(lexer.tokenize(code))).compile(options);
      <span class="keyword">if</span> (!options.header) {
        <span class="keyword">return</span> js;
      }
    } <span class="keyword">catch</span> (err) {
      <span class="keyword">if</span> (options.filename) {
        err.message = <span class="string">"In "</span> + options.filename + <span class="string">", "</span> + err.message;
      }
      <span class="keyword">throw</span> err;
    }
    header = <span class="string">"Generated by CoffeeScript "</span> + <span class="keyword">this</span>.VERSION;
    <span class="keyword">return</span> <span class="string">"// "</span> + header + <span class="string">"\n"</span> + js;
  };

  exports.tokens = <span class="keyword">function</span>(code, options) {
    <span class="keyword">return</span> lexer.tokenize(code, options);
  };

  exports.nodes = <span class="keyword">function</span>(source, options) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> source === <span class="string">'string'</span>) {
      <span class="keyword">return</span> parser.parse(lexer.tokenize(source, options));
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> parser.parse(source);
    }
  };

  exports.run = <span class="keyword">function</span>(code, options) {
    <span class="keyword">var</span> mainModule;
    <span class="keyword">if</span> (options == <span class="literal">null</span>) {
      options = {};
    }
    mainModule = require.main;
    mainModule.filename = process.argv[<span class="number">1</span>] = options.filename ? fs.realpathSync(options.filename) : <span class="string">'.'</span>;
    mainModule.moduleCache &amp;&amp; (mainModule.moduleCache = {});
    mainModule.paths = require(<span class="string">'module'</span>)._nodeModulePaths(path.dirname(fs.realpathSync(options.filename)));
    <span class="keyword">if</span> (path.extname(mainModule.filename) !== <span class="string">'.coffee'</span> || require.extensions) {
      <span class="keyword">return</span> mainModule._compile(compile(code, options), mainModule.filename);
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> mainModule._compile(code, mainModule.filename);
    }
  };

  exports[<span class="string">"eval"</span>] = <span class="keyword">function</span>(code, options) {
    <span class="keyword">var</span> Module, Script, js, k, o, r, sandbox, v, _i, _len, _module, _ref1, _ref2, _require;
    <span class="keyword">if</span> (options == <span class="literal">null</span>) {
      options = {};
    }
    <span class="keyword">if</span> (!(code = code.trim())) {
      <span class="keyword">return</span>;
    }
    Script = vm.Script;
    <span class="keyword">if</span> (Script) {
      <span class="keyword">if</span> (options.sandbox != <span class="literal">null</span>) {
        <span class="keyword">if</span> (options.sandbox <span class="keyword">instanceof</span> Script.createContext().constructor) {
          sandbox = options.sandbox;
        } <span class="keyword">else</span> {
          sandbox = Script.createContext();
          _ref1 = options.sandbox;
          <span class="keyword">for</span> (k <span class="keyword">in</span> _ref1) {
            <span class="keyword">if</span> (!__hasProp.call(_ref1, k)) <span class="keyword">continue</span>;
            v = _ref1[k];
            sandbox[k] = v;
          }
        }
        sandbox.global = sandbox.root = sandbox.GLOBAL = sandbox;
      } <span class="keyword">else</span> {
        sandbox = global;
      }
      sandbox.__filename = options.filename || <span class="string">'eval'</span>;
      sandbox.__dirname = path.dirname(sandbox.__filename);
      <span class="keyword">if</span> (!(sandbox !== global || sandbox.module || sandbox.require)) {
        Module = require(<span class="string">'module'</span>);
        sandbox.module = _module = <span class="keyword">new</span> Module(options.modulename || <span class="string">'eval'</span>);
        sandbox.require = _require = <span class="keyword">function</span>(path) {
          <span class="keyword">return</span> Module._load(path, _module, <span class="literal">true</span>);
        };
        _module.filename = sandbox.__filename;
        _ref2 = Object.getOwnPropertyNames(require);
        <span class="keyword">for</span> (_i = <span class="number">0</span>, _len = _ref2.length; _i &lt; _len; _i++) {
          r = _ref2[_i];
          <span class="keyword">if</span> (r !== <span class="string">'paths'</span>) {
            _require[r] = require[r];
          }
        }
        _require.paths = _module.paths = Module._nodeModulePaths(process.cwd());
        _require.resolve = <span class="keyword">function</span>(request) {
          <span class="keyword">return</span> Module._resolveFilename(request, _module);
        };
      }
    }
    o = {};
    <span class="keyword">for</span> (k <span class="keyword">in</span> options) {
      <span class="keyword">if</span> (!__hasProp.call(options, k)) <span class="keyword">continue</span>;
      v = options[k];
      o[k] = v;
    }
    o.bare = <span class="literal">true</span>;
    js = compile(code, o);
    <span class="keyword">if</span> (sandbox === global) {
      <span class="keyword">return</span> vm.runInThisContext(js);
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> vm.runInContext(js, sandbox);
    }
  };

  lexer = <span class="keyword">new</span> Lexer;

  parser.lexer = {
    lex: <span class="keyword">function</span>() {
      <span class="keyword">var</span> tag, _ref1;
      _ref1 = <span class="keyword">this</span>.tokens[<span class="keyword">this</span>.pos++] || [<span class="string">''</span>], tag = _ref1[<span class="number">0</span>], <span class="keyword">this</span>.yytext = _ref1[<span class="number">1</span>], <span class="keyword">this</span>.yylineno = _ref1[<span class="number">2</span>];
      <span class="keyword">return</span> tag;
    },
    setInput: <span class="keyword">function</span>(tokens) {
      <span class="keyword">this</span>.tokens = tokens;
      <span class="keyword">return</span> <span class="keyword">this</span>.pos = <span class="number">0</span>;
    },
    upcomingInput: <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="string">""</span>;
    }
  };

  parser.yy = require(<span class="string">'./nodes'</span>);

}).call(<span class="keyword">this</span>);
</code></pre>