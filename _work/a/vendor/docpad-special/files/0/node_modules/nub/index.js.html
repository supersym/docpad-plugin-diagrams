<h1>nub</h1>
<pre><code class="lang-js"><span class="keyword">var</span> nub = module.exports = <span class="function"><span class="keyword">function</span> <span class="params">(xs, cmp)</span> {</span>
    <span class="keyword">if</span> (<span class="keyword">typeof</span> xs === <span class="string">'function'</span> || cmp) {
        <span class="keyword">return</span> nub.by(xs, cmp);
    }
    
    <span class="keyword">var</span> keys = {
        <span class="string">'object'</span> : [],
        <span class="string">'function'</span> : [],
        <span class="string">'string'</span> : {},
        <span class="string">'number'</span> : {},
        <span class="string">'boolean'</span> : {},
        <span class="string">'undefined'</span> : {}
    };
    
    <span class="keyword">var</span> res = [];
    
    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; xs.length; i++) {
        <span class="keyword">var</span> x = xs[i];
        <span class="keyword">var</span> recs = x === <span class="string">'__proto__'</span>
            ? keys.objects
            : keys[<span class="keyword">typeof</span> x] || keys.objects
        ;
        
        <span class="keyword">if</span> (Array.isArray(recs)) {
            <span class="keyword">if</span> (recs.indexOf(x) &lt; <span class="number">0</span>) {
                recs.push(x);
                res.push(x);
            }
        }
        <span class="keyword">else</span> <span class="keyword">if</span> (!Object.hasOwnProperty.call(recs, x)) {
            recs[x] = <span class="literal">true</span>;
            res.push(x);
        }
    }
    
    <span class="keyword">return</span> res;
};

nub.by = <span class="function"><span class="keyword">function</span> <span class="params">(xs, cmp)</span> {</span>
    <span class="keyword">if</span> (<span class="keyword">typeof</span> xs === <span class="string">'function'</span>) {
        <span class="keyword">var</span> cmp_ = cmp;
        cmp = xs;
        xs = cmp_;
    }
    
    <span class="keyword">var</span> res = [];
    
    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; xs.length; i++) {
        <span class="keyword">var</span> x = xs[i];
        
        <span class="keyword">var</span> found = <span class="literal">false</span>;
        <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; res.length; j++) {
            <span class="keyword">var</span> y = res[j];
            <span class="keyword">if</span> (cmp.call(res, x, y)) {
                found = <span class="literal">true</span>;
                <span class="keyword">break</span>;
            }
        }
        
        <span class="keyword">if</span> (!found) res.push(x);
    }
    
    <span class="keyword">return</span> res;
};
</code></pre>